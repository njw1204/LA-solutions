# 15646번 : 농부 후안은 바리스타입니다
* [문제](https://www.acmicpc.net/problem/15646)<br>
* [예시 코드](https://github.com/njw1204/LA-solutions/blob/master/(BOJ%2015646)%20%EB%86%8D%EB%B6%80%20%ED%9B%84%EC%95%88%EC%9D%80%20%EB%B0%94%EB%A6%AC%EC%8A%A4%ED%83%80%EC%9E%85%EB%8B%88%EB%8B%A4/15646.cpp)<br>

<br>

이 문제는 여러 방법으로 접근할 수 있지만, N과 M의 범위가 크고 쿼리도 20만개나 들어와서 TLE를 받기 쉬운 문제입니다. 밑에서 설명하겠지만 입출력에 관한 처리도 해줘야 시간 내에 해결됩니다. 2차원 펜윅 트리를 이용해서 시간복잡도 O(Qlog(N+M))으로 풀어보겠습니다.

<br>

씨앗을 심는 위치는 직사각형 모양입니다. 직사각형 안의 모든 위치를 업데이트하면 시간이 많이 걸리니, 직사각형의 꼭짓점 4개에만 업데이트하면 빠르게 해결할 수 있습니다. 아래와 같이 펜윅 트리를 업데이트 해주세요.

```
(x1, y1) ~ (x2, y2)에 영양이 d인 씨앗을 심을 때
1. (x1, y1)에 +d
2. (x2+1, y1)에 -d
3. (x1, y2+1)에 -d
4. (x2+1, y2+1)에 +d
```

이렇게 하고 (x,y)에 심은 씨앗들의 영양의 합을 확인할때는 펜윅 트리에서 (1,1) ~ (x,y)의 합을 구하면 됩니다. 씨앗을 심는 것과 영양의 합을 확인하는 작업 둘 다 로그 단위 시간복잡도입니다. 이제 시간 내에 해결될 것 같지만 그러지 않을 수도 있습니다. 시간복잡도는 괜찮은데 말이죠.

<br>

만약 아직도 시간 초과가 뜬다면 그건 입출력 함수의 속도 문제입니다. 예를 들어 C++의 cin은 매우 느립니다. scanf를 써도 되지만, cin을 빠르게 하려면 다음 함수들을 써주세요.

```c++
ios_base::sync_with_stdio(false);
cin.tie(0);
```

이와 같이 하면 시간 초과 문제가 해결됩니다. 주의할 점으로는 sync_with_stdio(false)를 하면 cstdio에 있는 입출력함수(printf,scanf,gets,puts,getchar,putchar 등등..)을 쓰면 안됩니다. 이 방법에 대해선 [여기](http://codecollector.tistory.com/381)를 참고하면 좋습니다.
